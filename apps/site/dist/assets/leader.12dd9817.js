(function(){"use strict";self.onconnect=function(e){console.log("leader connected");var r=e.ports[0];console.log(e);let t=[];r.onmessage=function(c){for(const n in c.data)if(n.includes("init")){const s=c.data[n];s.onmessage=function(o){const{id:a}=o.data;console.log(`got port from ${a}`),t.push(o.data.port)}}setInterval(function(){t.forEach(n=>{const o=new TextEncoder().encode("random text");n.postMessage(o,[o.buffer])})},1e3)}}})();
